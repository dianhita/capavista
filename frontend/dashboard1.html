<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Panel Atención al Cliente - Casino Atlantic</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <h2>Casino Atlantic</h2>
      <ul>
        <li><button onclick="mostrarSeccion('clientes')">Gestión de Clientes</button></li>
        <li><button onclick="mostrarSeccion('visitas')">Registro de Visitas</button></li>
        <li><button onclick="mostrarSeccion('incidencias')">Reclamos e Incidencias</button></li>
      </ul>
      <div class="logout-section">
        <button id="logoutBtn" class="btn-logout">Cerrar Sesión</button>
      </div>
    </aside>

    <!-- Contenido principal -->
    <main class="main-content">
      <div class="topbar">
        <div class="topbar-left"><span class="topbar-title">Atención al Cliente</span></div>
        <div class="topbar-right">
          <span class="user-label">Usuario:</span>
          <span id="userNameSpan" class="user-name">—</span>
        </div>
      </div>

      <!-- Sección: Clientes -->
      <section id="clientes" class="seccion activa">
        <div class="clientes-header">
          <h2>Gestión de Clientes</h2>
          <button class="btn-nuevo" onclick="abrirModal('modalNuevoCliente')">Nuevo Cliente</button>
        </div>
        <p class="subtitulo">Registro, edición y consulta de clientes</p>
        <div class="busqueda-clientes">
          <input type="text" id="buscarNombre" placeholder="Buscar por Nombre" oninput="filtrarClientes()" />
          <input type="text" id="buscarDNI" placeholder="Buscar por DNI" oninput="filtrarClientes()" />
          <button class="btn-verde" onclick="limpiarFiltroClientes()">Limpiar</button>
        </div>
        <table class="data-table">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>DNI</th>
              <th>Email</th>
              <th>Teléfono</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="tablaClientes"></tbody>
        </table>
      </section>

      <!-- Sección: Visitas -->
      <section id="visitas" class="seccion">
        <div class="clientes-header">
          <h2>Registro de Visitas</h2>
          <button class="btn-nuevo" onclick="abrirModal('modalNuevaVisita')">Registrar Visita</button>
        </div>
        <p class="subtitulo">Gestión y seguimiento de visitas a clientes</p>
        <div class="busqueda-visitas">
          <input type="text" id="buscarVisitaNombre" placeholder="Buscar por Nombre" oninput="filtrarVisitas()" />
          <input type="text" id="buscarVisitaIDM" placeholder="Buscar por DNI" oninput="filtrarVisitas()" />
          <button class="btn-verde" onclick="limpiarFiltroVisitas()">Limpiar</button>
        </div>
        <table class="data-table">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>DNI</th>
              <th>Fecha</th>
              <th>Servicio</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="tablaVisitas"></tbody>
        </table>
      </section>

      <!-- Sección: Casos -->
      <section id="incidencias" class="seccion">
        <div class="clientes-header">
          <h2>Reclamos, Sugerencias e Incidencias</h2>
          <button class="btn-nuevo" onclick="abrirModal('modalNuevoCaso')">Registrar Nuevo</button>
        </div>
        <div class="busqueda-casos">
          <input type="text" id="buscarCasoCliente" placeholder="Buscar por Nombre" oninput="filtrarCasos()" />
          <input type="text" id="buscarCasoCodigo" placeholder="Buscar por Código" oninput="filtrarCasos()" />
          <button class="btn-verde" onclick="limpiarFiltroCasos()">Limpiar</button>
        </div>
        <table class="data-table">
          <thead>
            <tr>
              <th>Código</th>
              <th>Cliente</th>
              <th>Tipo</th>
              <th>Asunto</th>
              <th>Prioridad</th>
              <th>Estado</th>
              <th>Fecha</th>
              <th>Asignado a</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="tablaCasos"></tbody>
        </table>
      </section>
    </main>
  </div>

  <!-- ========================= -->
  <!--          MODALES          -->
  <!-- ========================= -->

  <!-- Clientes: Ver -->
  <div id="modalVerCliente" class="modal">
    <div class="modal-content">
      <h3>Detalle del Cliente</h3>
      <div id="verClienteDatos"></div>
      <div class="modal-actions">
        <button class="btn" onclick="cerrarModal('modalVerCliente')">Cerrar</button>
        <button class="btn-verde" onclick="editarClienteDesdeVer()">Editar</button>
      </div>
    </div>
  </div>

  <!-- Clientes: Nuevo -->
  <div id="modalNuevoCliente" class="modal">
    <div class="modal-content">
      <h3>Nuevo Cliente</h3>
      <input id="nuevoNombre" type="text" placeholder="Nombre completo" />
      <input id="nuevoDNI" type="text" placeholder="DNI" />
      <input id="nuevoEmail" type="email" placeholder="Email" />
      <input id="nuevoTelefono" type="text" placeholder="Teléfono" />
      <select id="nuevoEstado">
        <option value="Activo">Activo</option>
        <option value="Inactivo">Inactivo</option>
      </select>
      <div class="modal-actions">
        <button class="btn" onclick="cerrarModal('modalNuevoCliente')">Cancelar</button>
        <button class="btn-verde" onclick="guardarNuevoCliente()">Guardar</button>
      </div>
    </div>
  </div>

  <!-- Clientes: Editar -->
  <div id="modalEditarCliente" class="modal" data-index="">
    <div class="modal-content">
      <h3>Editar Cliente</h3>
      <input id="editarNombre" type="text" />
      <input id="editarDNI" type="text" />
      <input id="editarEmail" type="email" />
      <input id="editarTelefono" type="text" />
      <select id="editarEstado">
        <option value="Activo">Activo</option>
        <option value="Inactivo">Inactivo</option>
      </select>
      <div class="modal-actions">
        <button class="btn" onclick="cerrarModal('modalEditarCliente')">Cancelar</button>
        <button class="btn-verde" onclick="actualizarCliente()">Actualizar</button>
      </div>
    </div>
  </div>

  <!-- Visitas: Ver -->
  <div id="modalVerVisita" class="modal">
    <div class="modal-content">
      <h3>Detalle de la Visita</h3>
      <div id="verVisitaDatos"></div>
      <div class="modal-actions">
        <button class="btn" onclick="cerrarModal('modalVerVisita')">Cerrar</button>
        <button class="btn-verde" onclick="editarVisitaDesdeVer()">Editar</button>
      </div>
    </div>
  </div>

  <!-- Visitas: Nueva - CORREGIDO -->
  <div id="modalNuevaVisita" class="modal">
    <div class="modal-content">
      <h3>Registrar Visita</h3>
      <label for="visitaClienteId">Cliente</label>
      <select id="visitaClienteId">
        <option value="">Seleccione un cliente</option>
      </select>
      <label for="visitaFecha">Fecha</label>
      <input id="visitaFecha" type="date" />
      <label for="visitaServicio">Servicio</label>
      <input id="visitaServicio" type="text" placeholder="Descripción del servicio" />
      <div class="modal-actions">
        <button class="btn" onclick="cerrarModal('modalNuevaVisita')">Cancelar</button>
        <button class="btn-verde" onclick="guardarNuevaVisita()">Guardar</button>
      </div>
    </div>
  </div>

  <!-- Visitas: Editar - CORREGIDO -->
  <div id="modalEditarVisita" class="modal" data-index="">
    <div class="modal-content">
      <h3>Editar Visita</h3>
      <label for="editarVisitaClienteId">Cliente</label>
      <select id="editarVisitaClienteId">
        <option value="">Seleccione un cliente</option>
      </select>
      <label for="editarVisitaFecha">Fecha</label>
      <input id="editarVisitaFecha" type="date" />
      <label for="editarVisitaServicio">Servicio</label>
      <input id="editarVisitaServicio" type="text" />
      <div class="modal-actions">
        <button class="btn" onclick="cerrarModal('modalEditarVisita')">Cancelar</button>
        <button class="btn-verde" onclick="actualizarVisita()">Actualizar</button>
      </div>
    </div>
  </div>

  <!-- Casos: Ver -->
  <div id="modalVerCaso" class="modal">
    <div class="modal-content">
      <h3>Detalle del Caso</h3>
      <div id="verCasoDatos"></div>
      <div class="modal-actions">
        <button class="btn" onclick="cerrarModal('modalVerCaso')">Cerrar</button>
        <button class="btn-verde" onclick="editarCasoDesdeVer()">Editar</button>
      </div>
    </div>
  </div>

  <!-- Casos: Nuevo -->
  <div id="modalNuevoCaso" class="modal">
    <div class="modal-content">
      <h3>Registrar Caso</h3>
      <input id="casoCodigo" type="text" placeholder="Código" />
      <input id="casoCliente" type="text" placeholder="Cliente" />
      <select id="casoTipo">
        <option value="Reclamo">Reclamo</option>
        <option value="Sugerencia">Sugerencia</option>
        <option value="Incidencia">Incidencia</option>
      </select>
      <input id="casoAsunto" type="text" placeholder="Asunto" />
      <select id="casoPrioridad">
        <option value="Alta">Alta</option>
        <option value="Media">Media</option>
        <option value="Baja">Baja</option>
      </select>
      <select id="casoEstado">
        <option value="Abierto">Abierto</option>
        <option value="En Proceso">En Proceso</option>
        <option value="Completado">Completado</option>
      </select>
      <input id="casoFecha" type="date" />
      <input id="casoResponsable" type="text" placeholder="Responsable" />
      <textarea id="casoDescripcion" placeholder="Descripción"></textarea>
      <div class="modal-actions">
        <button class="btn" onclick="cerrarModal('modalNuevoCaso')">Cancelar</button>
        <button class="btn-verde" onclick="guardarNuevoCaso()">Guardar</button>
      </div>
    </div>
  </div>

  <!-- Casos: Editar -->
  <div id="modalEditarCaso" class="modal" data-index="">
    <div class="modal-content">
      <h3>Editar Caso</h3>
      <input id="editarCodigo" type="text" />
      <input id="editarCliente" type="text" />
      <select id="editarTipo">
        <option value="Reclamo">Reclamo</option>
        <option value="Sugerencia">Sugerencia</option>
        <option value="Incidencia">Incidencia</option>
      </select>
      <input id="editarAsunto" type="text" />
      <select id="editarPrioridad">
        <option value="Alta">Alta</option>
        <option value="Media">Media</option>
        <option value="Baja">Baja</option>
      </select>
      <select id="editarEstado">
        <option value="Abierto">Abierto</option>
        <option value="En Proceso">En Proceso</option>
        <option value="Completado">Completado</option>
      </select>
      <input id="editarFecha" type="date" />
      <input id="editarResponsable" type="text" />
      <textarea id="editarDescripcion" placeholder="Descripción"></textarea>
      <div class="modal-actions">
        <button class="btn" onclick="cerrarModal('modalEditarCaso')">Cancelar</button>
        <button class="btn-verde" onclick="actualizarCaso()">Actualizar</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="api.js"></script>
  <script src="dashboard.js"></script>
</body>
</html>