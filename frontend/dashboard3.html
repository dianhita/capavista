<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard Gerente General - Casino Atlantic</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="dashboard-container">
    <aside class="sidebar">
      <h2>Casino Atlantic CRM</h2>
      <ul>
        <li><button onclick="mostrarSeccion('reportesConsolidados')">ğŸ“Š Reportes Consolidados</button></li>
        <li><button onclick="mostrarSeccion('busquedaAvanzada')">ğŸ” BÃºsqueda Avanzada</button></li>
        <li><button onclick="mostrarSeccion('estadisticas')">ğŸ“ˆ EstadÃ­sticas Generales</button></li>
      </ul>
      <div class="logout-section">
        <button id="logoutBtn" class="btn-logout">Cerrar sesiÃ³n</button>
      </div>
    </aside>

    <main class="main-content">
      <div class="topbar">
        <div class="topbar-left"><span class="topbar-title">Gerente General</span></div>
        <div class="topbar-right">
          <span class="user-label">Usuario:</span>
          <span id="userNameSpan" class="user-name">â€”</span>
        </div>
      </div>

      <!-- Reportes Consolidados -->
      <section id="reportesConsolidados" class="seccion activa">
        <div class="clientes-header">
          <div>
            <h2>Reportes Consolidados</h2>
            <p class="subtitulo">AnÃ¡lisis detallado de clientes, promociones, incidencias y visitas</p>
          </div>
          <div>
            <button class="btn-verde" onclick="generarConsolidado()">ğŸ“Š Generar General</button>
            <button class="btn-nuevo" onclick="descargarConsolidado()">ğŸ’¾ Descargar Reporte</button>
          </div>
        </div>

        <div class="filtros">
          <label for="tipoReporte">Tipo de Reporte:</label>
          <select id="tipoReporte" onchange="actualizarConsolidado()">
            <option value="clientes">Clientes</option>
            <option value="promociones">Promociones</option>
            <option value="incidencias">Incidencias</option>
            <option value="visitas">Visitas</option>
          </select>
          
          <label for="periodoConsolidado">PerÃ­odo:</label>
          <select id="periodoConsolidado" onchange="actualizarConsolidado()">
            <option value="ultimo-mes">Ãšltimo mes</option>
            <option value="ultima-semana">Ãšltima semana</option>
            <option value="trimestre">Trimestre</option>
            <option value="medio-ano">Medio aÃ±o</option>
            <option value="ultimo-ano">Ãšltimo aÃ±o</option>
          </select>
          
          <button class="btn-verde" onclick="actualizarConsolidado()">ğŸ”„ Actualizar</button>
        </div>

        <div class="estadisticas-reporte">
          <div class="card">
            <i>ğŸ‘¥</i>
            <h3>Total</h3>
            <p id="rc_total">â€”</p>
          </div>
          <div class="card">
            <i>âœ…</i>
            <h3>Activos</h3>
            <p id="rc_activos">â€”</p>
          </div>
          <div class="card">
            <i>â¸ï¸</i>
            <h3>Inactivos</h3>
            <p id="rc_inactivos">â€”</p>
          </div>
          <div class="card">
            <i>ğŸ†•</i>
            <h3>Nuevos</h3>
            <p id="rc_nuevos">â€”</p>
          </div>
        </div>

        <h3>Top Clientes por Actividad</h3>
        <table class="data-table">
          <thead>
            <tr>
              <th>Cliente</th>
              <th>Visitas</th>
            </tr>
          </thead>
          <tbody id="rc_topClientes">
            <tr>
              <td colspan="2" style="text-align: center;">Cargando datos...</td>
            </tr>
          </tbody>
        </table>
      </section>

      <!-- BÃºsqueda Avanzada -->
      <section id="busquedaAvanzada" class="seccion">
        <div class="clientes-header">
          <div>
            <h2>BÃºsqueda Avanzada</h2>
            <p class="subtitulo">Busque clientes y registros por nombre o DNI</p>
          </div>
          <div>
            <button class="btn-verde" onclick="ejecutarBusqueda()">ğŸ” Buscar</button>
          </div>
        </div>

        <div class="filtros">
          <input id="ba_query" type="text" placeholder="Ingrese nombre o DNI" />
          <select id="ba_tipo">
            <option value="todos">Todos los tipos</option>
            <option value="cliente">Clientes</option>
            <option value="visita">Visitas</option>
            <option value="caso">Incidencias</option>
            <option value="promocion">Promociones</option>
          </select>
          <button class="btn-verde" onclick="ejecutarBusqueda()">ğŸ” Buscar</button>
        </div>

        <table class="data-table">
          <thead>
            <tr>
              <th>Tipo</th>
              <th>Nombre/DNI</th>
              <th>Detalle</th>
              <th>Fecha</th>
            </tr>
          </thead>
          <tbody id="ba_resultados">
            <tr>
              <td colspan="4" style="text-align: center;">
                Ingrese un tÃ©rmino de bÃºsqueda y presione el botÃ³n Buscar
              </td>
            </tr>
          </tbody>
        </table>

        <h3>ğŸ’¡ Consejos de BÃºsqueda</h3>
        <ul class="top-clientes">
          <li>âœ“ Puede hacer una bÃºsqueda completa o parcial del cliente</li>
          <li>âœ“ Puede buscar por nombre o DNI</li>
          <li>âœ“ Puede combinar nombre y DNI para una bÃºsqueda mÃ¡s precisa</li>
          <li>âœ“ Puede filtrar por tipo: clientes, visitas, incidencias o promociones</li>
          <li>âœ“ Los resultados se muestran en tiempo real desde la base de datos</li>
        </ul>
      </section>

      <!-- EstadÃ­sticas Generales -->
      <section id="estadisticas" class="seccion">
        <div class="clientes-header">
          <div>
            <h2>EstadÃ­sticas Generales del Sistema</h2>
            <p class="subtitulo">Vista general del estado del CRM</p>
          </div>
          <div>
            <button class="btn-verde" onclick="cargarEstadisticasGenerales()">ğŸ”„ Actualizar</button>
          </div>
        </div>

        <h3>ğŸ“Š Clientes</h3>
        <div class="estadisticas-reporte">
          <div class="card">
            <i>ğŸ‘¥</i>
            <h3>Total Clientes</h3>
            <p id="stat_total_clientes">â€”</p>
          </div>
          <div class="card">
            <i>âœ…</i>
            <h3>Activos</h3>
            <p id="stat_clientes_activos">â€”</p>
          </div>
          <div class="card">
            <i>â¸ï¸</i>
            <h3>Inactivos</h3>
            <p id="stat_clientes_inactivos">â€”</p>
          </div>
          <div class="card">
            <i>ğŸ†•</i>
            <h3>Nuevos (30 dÃ­as)</h3>
            <p id="stat_nuevos_clientes">â€”</p>
          </div>
        </div>

        <h3>ğŸ“… Visitas y Casos</h3>
        <div class="estadisticas-reporte">
          <div class="card">
            <i>ğŸ“…</i>
            <h3>Total Visitas</h3>
            <p id="stat_total_visitas">â€”</p>
          </div>
          <div class="card">
            <i>ğŸ“‹</i>
            <h3>Total Casos</h3>
            <p id="stat_total_casos">â€”</p>
          </div>
          <div class="card">
            <i>âš ï¸</i>
            <h3>Casos Abiertos</h3>
            <p id="stat_casos_abiertos">â€”</p>
          </div>
          <div class="card">
            <i>âœ…</i>
            <h3>Tasa ResoluciÃ³n</h3>
            <p id="stat_tasa_resolucion">â€”</p>
          </div>
        </div>

        <h3>ğŸ“ˆ Resumen del Sistema</h3>
        <table class="data-table">
          <thead>
            <tr>
              <th>CategorÃ­a</th>
              <th>MÃ©trica</th>
              <th>Valor</th>
              <th>Estado</th>
            </tr>
          </thead>
          <tbody id="tablaResumenSistema">
            <tr>
              <td colspan="4" style="text-align: center;">Cargando resumen...</td>
            </tr>
          </tbody>
        </table>
      </section>
    </main>
  </div>

  <script src="api.js"></script>
  <script src="dashboard3.js"></script>
</body>
</html>