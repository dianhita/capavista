<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gerencia de Marketing - Casino Atlantic</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <h2>Casino Atlantic</h2>
      <ul>
        <li><button onclick="mostrarSeccion('promociones')">Promociones</button></li>
        <li><button onclick="mostrarSeccion('asignacion')">Asignaci√≥n de Promociones</button></li>
        <li><button onclick="mostrarSeccion('reportes')">Reportes de Clientes</button></li>
      </ul>
      <div class="logout-section">
        <button id="logoutBtn" class="btn-logout">Cerrar sesi√≥n</button>
      </div>
    </aside>

    <!-- Contenido principal -->
    <main class="main-content">
      <!-- Topbar -->
      <div class="topbar">
        <div class="topbar-left"><span class="topbar-title">Gerencia de Marketing</span></div>
        <div class="topbar-right">
          <span class="user-label">Usuario:</span>
          <span id="userNameSpan" class="user-name">‚Äî</span>
        </div>
      </div>

      <!-- Promociones -->
      <section id="promociones" class="seccion activa">
        <div class="clientes-header">
          <h2>Gesti√≥n de Promociones</h2>
          <button class="btn-nuevo" onclick="abrirModal('modalNuevaPromo')">Nueva Promoci√≥n</button>
        </div>
        <p class="subtitulo">Creaci√≥n y seguimiento de beneficios promocionales</p>
        <div class="filtros">
          <input type="text" id="buscarPromoNombre" placeholder="Buscar por Nombre" />
          <button class="btn-verde" onclick="filtrarPromociones()">Buscar</button>
        </div>
        <table class="data-table">
          <thead>
            <tr>
              <th>Nombre</th><th>Descuento</th><th>Inicio</th><th>Fin</th><th>Estado</th><th>Asignados</th><th>Acciones</th>
            </tr>
          </thead>
          <tbody id="tablaPromociones"></tbody>
        </table>
      </section>

      <!-- Asignaci√≥n -->
      <section id="asignacion" class="seccion">
        <div class="clientes-header">
          <h2>Asignaci√≥n de Promociones</h2>
          <button class="btn-nuevo" onclick="abrirModalAsignacion()">+ Nueva Asignaci√≥n</button>
        </div>
        <p class="subtitulo">Asigne promociones a clientes espec√≠ficos</p>
        <div class="filtros">
          <input type="text" id="filtroAsignNombre" placeholder="Buscar por Nombre" />
          <input type="text" id="filtroAsignDni" placeholder="Buscar por DNI" />
          <button class="btn-verde" onclick="renderAsignaciones()">Buscar</button>
        </div>
        <table class="data-table">
          <thead>
            <tr>
              <th>Nombre</th><th>DNI</th><th>Promoci√≥n</th><th>Descuento</th><th>Fecha</th><th>Acciones</th>
            </tr>
          </thead>
          <tbody id="tablaAsignaciones"></tbody>
        </table>
      </section>

      <!-- Reportes -->
      <section id="reportes" class="seccion">
        <div class="clientes-header">
          <div>
            <h2>Reportes de Clientes</h2>
            <p class="subtitulo">An√°lisis detallado de clientes y actividad</p>
          </div>
          <div>
            <button class="btn-azul" onclick="generarReporte()">Generar un Reporte</button>
            <button class="btn-verde" onclick="descargarReporte()">Descargar Reporte</button>
          </div>
        </div>

        <div class="filtros">
          <label for="periodoReporte">Seleccione el per√≠odo a analizar:</label>
          <select id="periodoReporte" onchange="actualizarPeriodo()">
            <option value="ultimo-mes" selected>√öltimo mes</option>
            <option value="ultima-semana">√öltima semana</option>
            <option value="trimestre">Trimestre</option>
            <option value="medio-ano">Medio a√±o</option>
            <option value="ultimo-ano">√öltimo a√±o</option>
          </select>
        </div>

        <div class="estadisticas-reporte">
          <div class="card"><i>üë•</i><h3>Total Clientes</h3><p id="totalClientes">1247</p></div>
          <div class="card"><i>‚úÖ</i><h3>Clientes Activos</h3><p id="clientesActivos">1098</p></div>
          <div class="card"><i>‚è∏Ô∏è</i><h3>Clientes Inactivos</h3><p id="clientesInactivos">149</p></div>
          <div class="card"><i>üÜï</i><h3>Nuevos Clientes</h3><p id="nuevosClientes">89</p></div>
        </div>

        <h3>Top Clientes por Actividad</h3>
        <p class="subtitulo">Clientes con mayor n√∫mero de visitas</p>
        <table class="data-table">
          <thead><tr><th>Cliente</th><th>Visitas</th></tr></thead>
          <tbody id="tablaTopClientes">
            <tr><td>Mar√≠a Gonz√°lez L√≥pez</td><td>6</td></tr>
            <tr><td>Carlos Ram√≠rez Soto</td><td>6</td></tr>
            <tr><td>Ana Mart√≠nez Cruz</td><td>6</td></tr>
          </tbody>
        </table>
      </section>
    </main>
  </div>

  <!-- Modal: Nueva Promoci√≥n -->
  <div class="modal" id="modalNuevaPromo">
    <div class="modal-content">
      <h3>Nueva Promoci√≥n</h3>
      <label for="promoNombre">Nombre de la Promoci√≥n</label>
      <input id="promoNombre" type="text" placeholder="Ej: Black Friday 25%" />
      <label for="promoDescuento">Descuento (%)</label>
      <input id="promoDescuento" type="number" placeholder="25" min="0" max="100" />
      <label for="promoInicio">Fecha de Inicio</label>
      <input id="promoInicio" type="date" />
      <label for="promoFin">Fecha de Fin</label>
      <input id="promoFin" type="date" />
      <label for="promoEstado">Estado</label>
      <select id="promoEstado">
        <option>Programada</option>
        <option>Activa</option>
        <option>Finalizada</option>
      </select>
      <div class="modal-actions">
        <button class="btn" onclick="cerrarModal('modalNuevaPromo')">Cancelar</button>
        <button class="btn-verde" onclick="guardarNuevaPromocion()">Guardar</button>
      </div>
    </div>
  </div>

  <!-- Modal: Nueva Asignaci√≥n - CORREGIDO -->
  <div class="modal" id="modalNuevaAsignacion">
    <div class="modal-content">
      <h3>Nueva Asignaci√≥n</h3>
      <label for="asignarClienteId">Seleccionar Cliente</label>
      <select id="asignarClienteId">
        <option value="">Seleccione un cliente</option>
      </select>
      <label for="asignarPromoId">Seleccionar Promoci√≥n</label>
      <select id="asignarPromoId">
        <option value="">Seleccione una promoci√≥n</option>
      </select>
      <label for="asignarFecha">Fecha de Asignaci√≥n</label>
      <input id="asignarFecha" type="date" />
      <div class="modal-actions">
        <button class="btn" onclick="cerrarModal('modalNuevaAsignacion')">Cancelar</button>
        <button class="btn-verde" onclick="guardarAsignacion()">Asignar</button>
      </div>
    </div>
  </div>

  <script src="api.js"></script>
  <script src="dashboard2.js"></script>
</body>
</html>